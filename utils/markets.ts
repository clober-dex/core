import { BigNumber } from 'ethers'
import {
  arbitrum,
  arbitrumGoerli,
  mainnet,
  polygon,
  zkSyncTestnet,
  polygonZkEvmTestnet,
  polygonZkEvm,
} from '@wagmi/chains'

import { CLOBER_ADMIN, MARKET_TYPE, TOKEN } from './constant'

type MarketConfig = {
  name: string
  host: string
  type: number
  quoteToken: string
  baseToken: string
  quoteUnit: BigNumber
  makeFee: number
  takeFee: number
  address?: string
}

export type VolatileMarketConfig = MarketConfig & {
  a: BigNumber
  r: BigNumber
}

export type StableMarketConfig = MarketConfig & {
  a: BigNumber
  d: BigNumber
}

type MarketConfigs = {
  [network: string]: (StableMarketConfig | VolatileMarketConfig)[]
}

export const marketConfigs: MarketConfigs = {
  [polygonZkEvmTestnet.id]: [
    {
      name: 'DAI/cUSD',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[polygonZkEvmTestnet.id].CUSD, // cUSD
      baseToken: TOKEN[polygonZkEvmTestnet.id].DAI, // DAI
      quoteUnit: BigNumber.from('1'),
      makeFee: -40,
      takeFee: 60,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x300591d044836ED4c93c3703e3FD18Cd864cc79D',
    },
    {
      name: 'CLOB/cUSD',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygonZkEvmTestnet.id].CUSD, // cUSD
      baseToken: TOKEN[polygonZkEvmTestnet.id].CLOB, // CLOB
      quoteUnit: BigNumber.from('1'),
      makeFee: -200,
      takeFee: 400,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0xb8c224D12888DA9De4D833aBCDCF6D744A39EBA6',
    },
    {
      name: 'MANGO/cUSD',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygonZkEvmTestnet.id].CUSD, // cUSD
      baseToken: TOKEN[polygonZkEvmTestnet.id].MANGO, // MANGO
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0x8E02612391843175B13883a284FD65A6C66FDD79',
    },
    {
      name: 'MANGO/cUSD-makerFee',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygonZkEvmTestnet.id].CUSD, // cUSD
      baseToken: TOKEN[polygonZkEvmTestnet.id].MANGO, // MANGO
      quoteUnit: BigNumber.from('1'),
      makeFee: 3000,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0xF62302981718c8B6d28cF10a9A175FC227Fb27E8',
    },
  ],
  [polygonZkEvm.id]: [
    {
      name: 'MANGO/USDC',
      host: '0x62e5E8D25c88D9c4b67f09c46D96C9ECD3864757', // mango admin
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygonZkEvm.id].USDC,
      baseToken: TOKEN[polygonZkEvm.id].MANGO,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0x1FC38BA10E741F357b1c8B69DC08eA654c21Ae37',
    },
  ],
  [zkSyncTestnet.id]: [
    {
      name: 'WETH/USDC',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[zkSyncTestnet.id].USDC,
      baseToken: TOKEN[zkSyncTestnet.id].WETH,
      quoteUnit: BigNumber.from('1'),
      makeFee: -100,
      takeFee: 500,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0x536790CcB1FA5ee19645031570C1642Be2Bdd1c8',
    },
    {
      name: 'DAI/USDC',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[zkSyncTestnet.id].USDC,
      baseToken: TOKEN[zkSyncTestnet.id].DAI,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0xDcB91c6ec7c4Ac3cFBcEf6Df198407F32C621A3A',
    },
  ],
  [mainnet.id]: [
    {
      name: 'WETH/USDC',
      host: CLOBER_ADMIN[mainnet.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[mainnet.id].USDC,
      baseToken: TOKEN[mainnet.id].WETH,
      quoteUnit: BigNumber.from('1'),
      makeFee: -100,
      takeFee: 500,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0xFBfd6eA54C50cb48ecAD02dB2Cf167daFdC81355',
    },
    {
      name: 'DAI/USDC',
      host: CLOBER_ADMIN[mainnet.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[mainnet.id].USDC,
      baseToken: TOKEN[mainnet.id].DAI,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x1c230Df6364af81d1585C3B3e6aC5aaD2daD9bD9',
    },
    {
      name: 'USDC/USDT',
      host: CLOBER_ADMIN[mainnet.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[mainnet.id].USDT,
      baseToken: TOKEN[mainnet.id].USDC,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0xb853dB46f47FEBC24E1493573f2d7A195635CCf8',
    },
  ],
  [polygon.id]: [
    {
      name: 'MANGO/USDC-v1.1',
      host: CLOBER_ADMIN[polygon.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygon.id].USDC,
      baseToken: TOKEN[polygon.id].MANGO,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0x2E599A3E0b02bc24c3acfbdA183BBCeb020FBd6F',
    },
    {
      name: 'WETH/USDC-v1',
      host: CLOBER_ADMIN[polygon.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygon.id].USDC,
      baseToken: TOKEN[polygon.id].WETH,
      quoteUnit: BigNumber.from('1'),
      makeFee: -100,
      takeFee: 500,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0x6EF4dBa10BE9A64fC8A4BD74d613999787488666',
    },
    {
      name: 'WMATIC/USDC-v1',
      host: CLOBER_ADMIN[polygon.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[polygon.id].USDC,
      baseToken: TOKEN[polygon.id].WMATIC,
      quoteUnit: BigNumber.from('1'),
      makeFee: -100,
      takeFee: 500,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0x410b33f656EE634B977BB1334E827d81d25E0Cb6',
    },
    {
      name: 'DAI/USDC-v1',
      host: CLOBER_ADMIN[polygon.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[polygon.id].USDC,
      baseToken: TOKEN[polygon.id].DAI,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x4457d03FE38a8CE83591bc09eF5B4085b9c38117',
    },

    {
      name: 'USDC/USDT-v1',
      host: CLOBER_ADMIN[polygon.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[polygon.id].USDT,
      baseToken: TOKEN[polygon.id].USDC,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x8be0921EaE1C60AE2a9f6c198b87F6E28AA4cdb9',
    },
  ],
  [arbitrum.id]: [
    {
      name: 'MANGO/USDC-v1.1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].MANGO,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0xcA4C669093572c5a23DE04B848a7f706eCBdFAC2',
    },
    {
      name: 'ARB/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].ARB,
      quoteUnit: BigNumber.from('1'),
      makeFee: -1500,
      takeFee: 2000,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0xE462374433029Bf889532F7fd3692ccAB736a559',
    },
    {
      name: 'plsARB/ARB-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].ARB,
      baseToken: TOKEN[arbitrum.id].plsARB,
      quoteUnit: BigNumber.from(10).pow(9),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(5).mul(BigNumber.from(10).pow(15)),
      d: BigNumber.from(5).mul(BigNumber.from(10).pow(15)),
      address: '0xa416b5807c68259B057326dEEF59d5B2053969EE',
    },
    {
      name: 'ARB$0_5PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$0_5PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16),
      d: BigNumber.from(10).pow(16),
      address: '0xDD4faa66E88f8EB52138FD7135d5b90EEeF42ca6',
    },
    {
      name: 'ARB$1PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$1PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16),
      d: BigNumber.from(10).pow(16),
      address: '0x9f7d97c2A6faf67172FD953e5300Af2d812c2ADD',
    },
    {
      name: 'ARB$2PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$2PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16).mul(2),
      d: BigNumber.from(10).pow(16).mul(2),
      address: '0xe10a215D29E0DEC9eF8eAB4ad0c40aE89E1a0569',
    },
    {
      name: 'ARB$4PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$4PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16).mul(4),
      d: BigNumber.from(10).pow(16).mul(4),
      address: '0x31953016364543d12FEFbc1418810Ded511044a0',
    },
    {
      name: 'ARB$8PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$8PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16).mul(8),
      d: BigNumber.from(10).pow(16).mul(8),
      address: '0x5A2d06949057Ce3a3d85fb6Bd53ebe8936609D3D',
    },
    {
      name: 'ARB$16PUT/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].Arbitrum$16PutOption,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 1000,
      a: BigNumber.from(10).pow(16).mul(16),
      d: BigNumber.from(10).pow(16).mul(16),
      address: '0x0071a75f81Fd939f65c09cC15E90f3c140FC591a',
    },
    {
      name: 'WETH/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].WETH,
      quoteUnit: BigNumber.from('1'),
      makeFee: -100,
      takeFee: 500,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0xC3c5316AE6f1e522E65074b70608C1Df01F93AE0',
    },
    {
      name: 'DAI/USDC-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDC,
      baseToken: TOKEN[arbitrum.id].DAI,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x02F4DC911919AcB274ceA42DfEb3481C88E4D330',
    },
    {
      name: 'USDC/USDT-v1',
      host: CLOBER_ADMIN[arbitrum.id],
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrum.id].USDT,
      baseToken: TOKEN[arbitrum.id].USDC,
      quoteUnit: BigNumber.from('1'),
      makeFee: -10,
      takeFee: 90,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x2639a9b9C2627c0B65a0E7AC26a197FdbAE26e26',
    },
  ],
  [arbitrumGoerli.id]: [
    {
      name: 'WETH/USDC-volatile',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrumGoerli.id].CUSD,
      baseToken: TOKEN[arbitrumGoerli.id].WETH,
      quoteUnit: BigNumber.from('1'),
      makeFee: -200,
      takeFee: 400,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0xb45c5A9273A7a77a3eA50a9BE33AdD7b0Bb2062A',
    },
    {
      name: 'DAI/cUSD-stable',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.STABLE,
      quoteToken: TOKEN[arbitrumGoerli.id].CUSD,
      baseToken: TOKEN[arbitrumGoerli.id].DAI,
      quoteUnit: BigNumber.from('1'),
      makeFee: -40,
      takeFee: 60,
      a: BigNumber.from(10).pow(14),
      d: BigNumber.from(10).pow(14),
      address: '0x122eb5B5135CC5824951c54c8C2dAF7dcfA06964',
    },
    {
      name: 'CLOB/cUSD-volatile',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrumGoerli.id].CUSD,
      baseToken: TOKEN[arbitrumGoerli.id].CLOB,
      quoteUnit: BigNumber.from('1'),
      makeFee: -200,
      takeFee: 400,
      a: BigNumber.from(10).pow(10),
      r: BigNumber.from(1001).mul(BigNumber.from(10).pow(15)),
      address: '0x004131C39a20899AF2A52c89cE0F90f03Af7B167',
    },
    {
      name: 'CLOB/cUSD',
      host: '0x5F79EE8f8fA862E98201120d83c4eC39D9468D49',
      type: MARKET_TYPE.VOLATILE,
      quoteToken: TOKEN[arbitrumGoerli.id].CUSD,
      baseToken: TOKEN[arbitrumGoerli.id].CLOB,
      quoteUnit: BigNumber.from('1'),
      makeFee: 0,
      takeFee: 3000,
      a: BigNumber.from(10).pow(13),
      r: BigNumber.from(101).mul(BigNumber.from(10).pow(16)),
      address: '0xB129d96A1973A252693dD28C334492Dcf211Dc25',
    },
  ],
}

export const initialRegisteredQuoteTokens: { [network: string]: string[] } = {
  [mainnet.id]: [
    TOKEN[mainnet.id].USDC,
    TOKEN[mainnet.id].DAI,
    TOKEN[mainnet.id].USDT,
  ],
  [polygon.id]: [
    TOKEN[polygon.id].USDC,
    TOKEN[polygon.id].DAI,
    TOKEN[polygon.id].USDT,
  ],
  [arbitrum.id]: [
    TOKEN[arbitrum.id].USDC,
    TOKEN[arbitrum.id].DAI,
    TOKEN[arbitrum.id].USDT,
    TOKEN[arbitrum.id].EUROe,
    TOKEN[arbitrum.id].ARB,
  ],
  [polygonZkEvm.id]: [TOKEN[polygonZkEvm.id].USDC],
  [arbitrumGoerli.id]: [TOKEN[arbitrumGoerli.id].CUSD],
}

export const legacyMarketsToRegister: { [network: string]: string[] } = {
  [arbitrum.id]: [
    '0x55fe89ada9277573d536f2cb332fe38e4a995549',
    '0x4d9cf78cc2a27100007a8f1b6435334d2bafeab3',
    '0xa416b5807c68259b057326deef59d5b2053969ee',
    '0xe462374433029bf889532f7fd3692ccab736a559',
    '0x0071a75f81fd939f65c09cc15e90f3c140fc591a',
    '0x5a2d06949057ce3a3d85fb6bd53ebe8936609d3d',
    '0x31953016364543d12fefbc1418810ded511044a0',
    '0xe10a215d29e0dec9ef8eab4ad0c40ae89e1a0569',
    '0x9f7d97c2a6faf67172fd953e5300af2d812c2add',
    '0xdd4faa66e88f8eb52138fd7135d5b90eeef42ca6',
    '0x2639a9b9c2627c0b65a0e7ac26a197fdbae26e26',
    '0x02f4dc911919acb274cea42dfeb3481c88e4d330',
    '0xc3c5316ae6f1e522e65074b70608c1df01f93ae0',
  ],
}
